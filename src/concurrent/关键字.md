## final

### 规则
1、读包含final域的对象引用，与读final域，两个操作不能重排序
2、在构造函数对一个final域的写入，与随后把这个被构造对象的引用赋值给

## volatile关键字
### 汇编层面
用volatile修饰的关键字，对应的汇编代码会多出一个lock前缀。在多核处理器下，lock前缀引起两件事：
1、处理器缓存行回写到内存
2、其它处理器中缓存了改地址的数据无效

### 内存语义
对volatile修饰过的变量进行写入操作，会直接从本地内存刷新到主内存。
对volatile变量的读操作，会使本地内存无效，直接读取主内存

## synchronized

### mark word
在锁状态不同的情况下，mark word的分配也是不一的。在64位虚拟机下，64bit；32位虚拟机，32bit。该对象的某一部分会记录线程ID

### 偏向锁
### 轻量级锁
### 重量级锁